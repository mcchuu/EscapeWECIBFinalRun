<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialogue Game</title>
</head>
<style>
    body {
        background-color: black;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .container {
        position: relative;
        max-width: 800px;
        width: 100%;
    }

    #scene {
        position: relative;
        padding-top: 40%;
        width: 100%;
        height: 400px;
    }

    #scene img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: none; 
    }

    .uidialogue {
        width: 100%;
        max-width: 800px;
        position: relative;
        top: -100px;
    }

    #dialogueContainer {
        top: -300px;
        position: relative;
        z-index: 2;
        width: 100%;
        padding: 20px;
    }

    #speakerName {
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 10px;
        z-index: 2;
        position: absolute;
        top: 237.5%;
        left: 82.5%;
        transform: translate(-50%, -50%);
        max-width: 80%;
        font-size: 11px;
    }

    #dialogueText {
        font-size: 50px;
        line-height: 1.5;
        position: absolute;
        top: -40%;
        left: 5%;
        max-width: 70%;
        text-align: left;
        font-family: system-ui;
        color: #3A3A50;
        font-size: 20px;
    }

    #choices {
        display: flex;
        position: absolute;
        flex-direction: column;
        gap: 6px;
        left: 5%;

    }

    .choice-btn {
        background-color: #333;
        color: white;
        border: 1px solid #555;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        text-align: left;
    }

    .choice-btn:hover {
        background-color: #444;
    }
</style>
<body>
    <div class="container">
        <div id="scene">
            <img id="bee" src="scene/bee.png">
            <img id="kween" src="scene/kween.png">
            <img id="vending" src="scene/vending.png">
            <img id="staircase" src="scene/staircase.png">
            <img id="hallway" src="scene/hallway.png">
            <img id="mcqueen" src="scene/mcqueen.png">
        </div>
        <img class="uidialogue" id="uidialogue" src="guiMcqueen.png">
        <div id="dialogueContainer">
            <div id="speakerName"></div>
            <div id="dialogueText"></div>
            <div id="choices"></div>
        </div>
    </div>

<script>
    const scene = ["bee", "kween", "vending", "staircase", "hallway", "mcqueen"];
    
    const dialogue = [
    {
                speaker: "Ms. Bee",
                text: "Welcome to python class!<br> Today we'll be showcasing everyone's final projects.",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Ms. Bee",
                text: "Please walk around the room to see what your classmates have been working on.",
                scene: "bee",
                choices: []
            },
            {
                speaker: "none",
                text: "an unnamed student intensely staring at them from across the room.",
                scene: "bee",
                choices: []
            },
            {
                speaker: "none",
                text: "The staring continues for an uncomfortably long time.",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Unnamed Student 1",
                text: "[whispering] Hey... hey you.",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Unnamed Student 1",
                text: "Do you want to see my projectâ€¦ its important.",
                scene: "bee",
                choices: [
                    { text: "Uh... okay?", nextIndex: 8 },
                    { text: "What's with the intense staring? It's kind of creepy.", nextIndex: 6 },
                    { text: "Pretend not to hear and look at your phone", nextIndex: 7 },
                ]
            },
            {
                speaker: "Emma",
                text: "[laughs nervously] Oh sorry, was I staring?",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Emma",
                text: "I've been coding for so long, PLEASE look at my project?",
                scene: "bee",
                choices: [
                    { text: "Uh... okay?", nextIndex: 8 },
                ]
            },
            {
                speaker: "Emma",
                text: "[excited] Okay, so I created something really nice!",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Unnamed Student 1",
                text: "[proud] I call it \"The Origin of Life.\" Get it?",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Unnamed Student 1",
                text: "Because we all come from... anyways What do you think?",
                scene: "bee",
                choices: [
                    { text: "I'm... not sure how to feel.", nextIndex: 10 },
                    { text: "That's... certainly creative..", nextIndex: 6 },
                ]
            },
            {
                speaker: "Unnamed Student 1",
                text: "[rolls eyes] Ugh, don't be such a prude.",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Unnamed Student 1",
                text: "Ms. Bee said our projects should \"express our innermost creativity!\"",
                scene: "bee",
                choices: []
            },
            {
                speaker: "you",
                text: " Is that...",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Ms. Bee",
                text: "Class is over! Have a good day everyone!",
                scene: "bee",
                choices: []
            },
            {
                speaker: "Ms.Kween",
                text: "Welcome to English",
                scene: "kween",
                choices: []
            }];

    let currentDialogueIndex = 0;

    // Function to display the current dialogue
    function displayDialogue() {
        const currentDialogue = dialogue[currentDialogueIndex];
        
        // Hide all scene images first
        scene.forEach(sceneName => {
            document.getElementById(sceneName).style.display = 'none';
        });
        
        // Show only the current scene image
        if (currentDialogue.scene) {
            const sceneElement = document.getElementById(currentDialogue.scene);
            if (sceneElement) {
                sceneElement.style.display = 'block';
            }
        }
        
        // Display speaker name (hide if "none")
        const speakerElement = document.getElementById('speakerName');
        if (currentDialogue.speaker === "none") {
            speakerElement.style.display = 'none';
        } else {
            speakerElement.style.display = 'block';
            speakerElement.textContent = currentDialogue.speaker;
        }
        
        // Display dialogue text
        document.getElementById('dialogueText').innerHTML = currentDialogue.text;
        
        // Clear previous choices
        const choicesElement = document.getElementById('choices');
        choicesElement.innerHTML = '';
        
        // Display choices if any
        if (currentDialogue.choices && currentDialogue.choices.length > 0) {
            currentDialogue.choices.forEach(choice => {
                const choiceButton = document.createElement('button');
                choiceButton.className = 'choice-btn';
                choiceButton.textContent = choice.text;
                choiceButton.addEventListener('click', () => {
                    currentDialogueIndex = choice.nextIndex;
                    displayDialogue();
                });
                choicesElement.appendChild(choiceButton);
            });
        } else {
            // If no choices, clicking anywhere advances to the next dialogue
            document.addEventListener('click', advanceDialogue, { once: true });
        }
    }
    
    // Function to advance to the next dialogue if there are no choices
    function advanceDialogue() {
        // Only advance if there are no choices in the current dialogue
        const currentDialogue = dialogue[currentDialogueIndex];
        if (!currentDialogue.choices || currentDialogue.choices.length === 0) {
            if (currentDialogueIndex < dialogue.length - 1) {
                currentDialogueIndex++;
                displayDialogue();
            }
        }
    }
    
    // Initialize the game
    window.addEventListener('load', function() {
        displayDialogue();
    });
</script>
</body>
</html>